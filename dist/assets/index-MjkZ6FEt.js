import{g as Y,a as Z,r as m,_ as ee,u as pe,b as ge,c as C,j as e,s as P,d as se,e as S,f as ae,B as xe,h as fe,i as U,l as me,k as be,m as te,D as ke,n as je,A as Ce,C as ve,o as ye,p as oe,q as ie,t as we,v as T,w as le,S as Se,I as D,x as K,T as q,y as j,E as Pe,z as Ne,F as Be,P as Te,G as Re,H as De,J as $e,K as Oe,L as ze,M as Q,N as X,O as G,Q as J,R as I,U as Fe,V as w,W as Ie,X as _e,Y as Ee,Z as _}from"./index-BAy75HH4.js";function Me(s){return Y("PrivateSwitchBase",s)}Z("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Ae=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Ke=s=>{const{classes:a,checked:o,disabled:i,edge:r}=s,t={root:["root",o&&"checked",i&&"disabled",r&&`edge${S(r)}`],input:["input"]};return ae(t,Me,a)},qe=P(xe)(({ownerState:s})=>C({padding:9,borderRadius:"50%"},s.edge==="start"&&{marginLeft:s.size==="small"?-3:-12},s.edge==="end"&&{marginRight:s.size==="small"?-3:-12})),Le=P("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),He=m.forwardRef(function(a,o){const{autoFocus:i,checked:r,checkedIcon:t,className:u,defaultChecked:h,disabled:d,disableFocusRipple:b=!1,edge:l=!1,icon:n,id:p,inputProps:x,inputRef:E,name:$,onBlur:O,onChange:z,onFocus:N,readOnly:L,required:H=!1,tabIndex:M,type:B,value:F}=a,c=ee(a,Ae),[f,k]=pe({controlled:r,default:!!h,name:"SwitchBase",state:"checked"}),y=ge(),ce=v=>{N&&N(v),y&&y.onFocus&&y.onFocus(v)},de=v=>{O&&O(v),y&&y.onBlur&&y.onBlur(v)},ue=v=>{if(v.nativeEvent.defaultPrevented)return;const W=v.target.checked;k(W),z&&z(v,W)};let R=d;y&&typeof R>"u"&&(R=y.disabled);const he=B==="checkbox"||B==="radio",A=C({},a,{checked:f,disabled:R,disableFocusRipple:b,edge:l}),V=Ke(A);return e.jsxs(qe,C({component:"span",className:se(V.root,u),centerRipple:!0,focusRipple:!b,disabled:R,tabIndex:null,role:void 0,onFocus:ce,onBlur:de,ownerState:A,ref:o},c,{children:[e.jsx(Le,C({autoFocus:i,checked:r,defaultChecked:h,className:V.input,disabled:R,id:he?p:void 0,name:$,onChange:ue,readOnly:L,ref:E,required:H,ownerState:A,tabIndex:M,type:B},B==="checkbox"&&F===void 0?{}:{value:F},x)),f?t:n]}))});function Ve(s){return Y("MuiSwitch",s)}const g=Z("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),We=["className","color","edge","size","sx"],Ue=s=>{const{classes:a,edge:o,size:i,color:r,checked:t,disabled:u}=s,h={root:["root",o&&`edge${S(o)}`,`size${S(i)}`],switchBase:["switchBase",`color${S(r)}`,t&&"checked",u&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},d=ae(h,Ve,a);return C({},a,d)},Qe=P("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(s,a)=>{const{ownerState:o}=s;return[a.root,o.edge&&a[`edge${S(o.edge)}`],a[`size${S(o.size)}`]]}})(({ownerState:s})=>C({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},s.edge==="start"&&{marginLeft:-8},s.edge==="end"&&{marginRight:-8},s.size==="small"&&{width:40,height:24,padding:7,[`& .${g.thumb}`]:{width:16,height:16},[`& .${g.switchBase}`]:{padding:4,[`&.${g.checked}`]:{transform:"translateX(16px)"}}})),Xe=P(He,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(s,a)=>{const{ownerState:o}=s;return[a.switchBase,{[`& .${g.input}`]:a.input},o.color!=="default"&&a[`color${S(o.color)}`]]}})(({theme:s})=>({position:"absolute",top:0,left:0,zIndex:1,color:s.vars?s.vars.palette.Switch.defaultColor:`${s.palette.mode==="light"?s.palette.common.white:s.palette.grey[300]}`,transition:s.transitions.create(["left","transform"],{duration:s.transitions.duration.shortest}),[`&.${g.checked}`]:{transform:"translateX(20px)"},[`&.${g.disabled}`]:{color:s.vars?s.vars.palette.Switch.defaultDisabledColor:`${s.palette.mode==="light"?s.palette.grey[100]:s.palette.grey[600]}`},[`&.${g.checked} + .${g.track}`]:{opacity:.5},[`&.${g.disabled} + .${g.track}`]:{opacity:s.vars?s.vars.opacity.switchTrackDisabled:`${s.palette.mode==="light"?.12:.2}`},[`& .${g.input}`]:{left:"-100%",width:"300%"}}),({theme:s,ownerState:a})=>C({"&:hover":{backgroundColor:s.vars?`rgba(${s.vars.palette.action.activeChannel} / ${s.vars.palette.action.hoverOpacity})`:U(s.palette.action.active,s.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},a.color!=="default"&&{[`&.${g.checked}`]:{color:(s.vars||s).palette[a.color].main,"&:hover":{backgroundColor:s.vars?`rgba(${s.vars.palette[a.color].mainChannel} / ${s.vars.palette.action.hoverOpacity})`:U(s.palette[a.color].main,s.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${g.disabled}`]:{color:s.vars?s.vars.palette.Switch[`${a.color}DisabledColor`]:`${s.palette.mode==="light"?me(s.palette[a.color].main,.62):be(s.palette[a.color].main,.55)}`}},[`&.${g.checked} + .${g.track}`]:{backgroundColor:(s.vars||s).palette[a.color].main}})),Ge=P("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(s,a)=>a.track})(({theme:s})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:s.transitions.create(["opacity","background-color"],{duration:s.transitions.duration.shortest}),backgroundColor:s.vars?s.vars.palette.common.onBackground:`${s.palette.mode==="light"?s.palette.common.black:s.palette.common.white}`,opacity:s.vars?s.vars.opacity.switchTrack:`${s.palette.mode==="light"?.38:.3}`})),Je=P("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(s,a)=>a.thumb})(({theme:s})=>({boxShadow:(s.vars||s).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),re=m.forwardRef(function(a,o){const i=fe({props:a,name:"MuiSwitch"}),{className:r,color:t="primary",edge:u=!1,size:h="medium",sx:d}=i,b=ee(i,We),l=C({},i,{color:t,edge:u,size:h}),n=Ue(l),p=e.jsx(Je,{className:n.thumb,ownerState:l});return e.jsxs(Qe,{className:se(n.root,r),sx:d,ownerState:l,children:[e.jsx(Xe,C({type:"checkbox",icon:p,checkedIcon:p,ref:o,ownerState:l},b,{classes:C({},n,{root:n.switchBase})})),e.jsx(Ge,{className:n.track,ownerState:l})]})}),Ye=m.forwardRef(function(a,o){return e.jsx(Se,{direction:"up",ref:o,...a})}),Ze=P(D)({position:"absolute",right:"16px",top:"4px"});function es({open:s,item:a,onCloseDialogEdit:o,onSubmit:i}){const{register:r,handleSubmit:t,control:u,resetField:h,setValue:d,watch:b,formState:{errors:l}}=te({defaultValues:{tenkhoi:"",thutu:1,status:!0}});m.useEffect(()=>{a&&(d("tenkhoi",a.tenkhoi,{shouldValidate:!0}),d("thutu",a.thutu,{shouldValidate:!0}),d("status",a.status,{shouldValidate:!0}))},[a]);const n=async p=>{if(i){const x={...p,id_edit:a._id};await i(x),o()}};return e.jsx(e.Fragment,{children:e.jsxs(ke,{maxWidth:"lg",fullWidth:!0,disableEscapeKeyDown:!0,onClose:(p,x)=>{x!=="backdropClick"&&o(p,x)},open:s,TransitionComponent:Ye,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[e.jsxs(je,{style:{display:"flex",borderBottom:"1px solid #ccc",backgroundColor:"#03528f",margin:"0px"},children:[e.jsx(Ce,{style:{color:"white",fontSize:"24px",marginRight:"8px"}}),e.jsx("span",{className:"text-white text-[16px]",children:"Chỉnh sửa khối"}),e.jsx(Ze,{onClick:()=>o(),children:e.jsx(ve,{style:{color:"white"}})})]}),e.jsx(ye,{children:e.jsx(oe,{children:e.jsxs("form",{className:"mt-2 mx-2",onSubmit:t(n),children:[e.jsxs("div",{className:"flex-col flex",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Tên khối: "]}),e.jsx("input",{...r("tenkhoi",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-col flex md:basis-1/2",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Thứ tự xuất hiện: "]}),e.jsx("input",{...r("thutu",{required:!0}),type:"number",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/2",children:[e.jsx("label",{className:"underline font-semibold",children:"Trạng thái hiển thị:"}),e.jsx(ie,{name:"status",control:u,render:({field:{value:p,onChange:x}})=>e.jsx(re,{checked:p,onChange:x})})]})]}),e.jsx(we,{children:e.jsxs(T,{color:"primary",variant:"contained",type:"submit",style:{margin:"4px auto"},children:[e.jsx(le,{}),e.jsx("span",{children:"Cập nhật"})]})})]})})})]})})}const ss=({row:s,page:a,rowsPerPage:o,index:i,onClickOpenDialogEdit:r,onClickOpenDialogDelete:t})=>{const[u,h]=m.useState(null);return K(d=>d.authReducer.roles_vanban2025),e.jsxs(q,{className:"hover:bg-slate-200 transition duration-300",children:[e.jsx(j,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:a*o+i}),e.jsx(j,{className:"border-r border-slate-300",align:"left",children:s.tenkhoi}),e.jsx(j,{className:"border-r border-slate-300",align:"left",children:s.thutu}),e.jsx(j,{className:"border-r border-slate-300",align:"left",children:s.status===!0?e.jsx(T,{color:"success",children:"Đang hiển thị"}):e.jsx(T,{color:"warning",children:"Không hiển thị"})}),e.jsxs(j,{align:"right",className:"bg-gray-300 flex justify-center items-center space-x-1 hover:bg-slate-500 transition duration-300",style:{width:"180px"},children:[e.jsx(T,{variant:"contained",color:"info",size:"small",onClick:()=>r(s),children:e.jsx(Pe,{style:{fontSize:"20px"}})}),e.jsx(T,{variant:"contained",color:"error",size:"small",style:{marginLeft:"4px"},onClick:()=>t(s._id),children:e.jsx(Ne,{style:{fontSize:"20px"}})})]})]},s._id)};function ne(s){const a=ze(),{count:o,page:i,rowsPerPage:r,onPageChange:t}=s,u=l=>{t(l,0)},h=l=>{t(l,i-1)},d=l=>{t(l,i+1)},b=l=>{t(l,Math.max(0,Math.ceil(o/r)-1))};return e.jsxs(oe,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(D,{onClick:u,disabled:i===0,"aria-label":"first page",children:a.direction==="rtl"?e.jsx(Q,{}):e.jsx(X,{})}),e.jsx(D,{onClick:h,disabled:i===0,"aria-label":"previous page",children:a.direction==="rtl"?e.jsx(G,{}):e.jsx(J,{})}),e.jsx(D,{onClick:d,disabled:i>=Math.ceil(o/r)-1,"aria-label":"next page",children:a.direction==="rtl"?e.jsx(J,{}):e.jsx(G,{})}),e.jsx(D,{onClick:b,disabled:i>=Math.ceil(o/r)-1,"aria-label":"last page",children:a.direction==="rtl"?e.jsx(X,{}):e.jsx(Q,{})})]})}ne.propTypes={count:I.number.isRequired,onPageChange:I.func.isRequired,page:I.number.isRequired,rowsPerPage:I.number.isRequired};function as({list:s,onClickOpenDialogEdit:a,onClickOpenDialogDelete:o}){const[i,r]=m.useState(0),[t,u]=m.useState(10);m.useEffect(()=>{r(0)},[s]);const h=i>0?Math.max(0,(1+i)*t-s.length):0,d=(l,n)=>{r(n)},b=l=>{u(parseInt(l.target.value,10)),r(0)};return e.jsxs(e.Fragment,{children:[e.jsx(Be,{component:Te,children:e.jsxs(Re,{"aria-label":"custom pagination table",children:[e.jsx(De,{children:e.jsxs(q,{children:[e.jsx(j,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#03528f"},children:"#"}),e.jsx(j,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#03528f"},children:"Khối, hệ, lực lượng"}),e.jsx(j,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"#03528f"},children:"Thứ tự"}),e.jsx(j,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"200px",backgroundColor:"#03528f"},children:"Trạng thái hiển thị"}),e.jsx(j,{align:"center",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#03528f",maxWidth:"150px"},children:"Thao tác"})]})}),e.jsxs($e,{children:[(t>0?s.slice(i*t,i*t+t):s).map((l,n)=>e.jsx(ss,{row:l,page:i,rowsPerPage:t,index:n+1,onClickOpenDialogEdit:a,onClickOpenDialogDelete:o},l._id)),h>0&&e.jsx(q,{style:{height:53*h},children:e.jsx(j,{colSpan:6})})]})]})}),e.jsx("div",{children:e.jsx(Oe,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:s.length,rowsPerPage:t,page:i,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:d,onRowsPerPageChange:b,ActionsComponent:ne,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:n,to:p,count:x}){return`hiển thị ${n} đến ${p} bản ghi trong tổng số ${x!==-1?x:`more than ${p}`} bản ghi`}})})]})}const os=()=>{let s=K(c=>c.authReducer.id_user);const a=Fe();if(K(c=>c.authReducer.captaikhoan_phieulayykien)!=="Quản trị V03")return w.error("Tài khoản không có truy cập trang này",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"}),e.jsx(Ie,{to:"/login",replace:!0});const[i,r]=m.useState([]),[t]=_e(),[u,h]=m.useState({status:!1,item:null}),d=()=>{h({...u,status:!1})},b=c=>{h({item:c,status:!0})},[l,n]=m.useState({status:!1,id_Delete:null}),p=c=>{n({status:!0,id_Delete:c})},x=()=>{n({...l,status:!1})},E=()=>{n({...l,status:!1})},{register:$,handleSubmit:O,control:z,resetField:N,watch:L,formState:{errors:H}}=te({defaultValues:{tenkhoi:"",thutu:1,status:!0}});m.useEffect(()=>{(async()=>{try{let f=await _.getKhois({user_created:s});r(f.data)}catch(f){f.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(a("/login"),w.error(f.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"}))}})()},[]);const M=async c=>{let f={...c,user_created:s};t(!0);try{let k=await _.addKhoi(f);r(k.data.khois),setTimeout(()=>{t(!1)},400),N("tenkhoi"),N("thutu"),N("status"),w.success(k.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"})}catch(k){w.error(k.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"}),t(!1)}},B=async c=>{let f={...c,user_created:s};t(!0);try{let k=await _.editKhoi(f);r(k.data.khois),setTimeout(()=>{t(!1)},400),w.success(k.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"})}catch(k){w.error(k.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"}),t(!1)}},F=async()=>{t(!0);try{let c=await _.deleteKhoi(l.id_Delete,{user_created:s});r(c.data.khois),setTimeout(()=>{t(!1)},400),n({...l,status:!1}),w.success(c.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"})}catch(c){n({...l,status:!1}),w.error(c.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"}),t(!1)}};return e.jsxs("div",{"data-aos":"fade-left","data-aos-once":"true",children:[e.jsx("div",{className:"my-2",children:e.jsx("h4",{className:"uppercase font-semibold text-sm md:text-[16px]",children:"Quản trị khối hệ thống"})}),e.jsxs("form",{className:"px-4 py-4 border mt-3 pb-8 rounded-md shadow-md",onSubmit:O(M),children:[e.jsxs("div",{className:"flex-col flex",children:[e.jsxs("label",{className:"underline font-semibold text-sm",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Tên khối: "]}),e.jsx("input",{...$("tenkhoi",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-col flex md:basis-1/2",children:[e.jsxs("label",{className:"underline font-semibold text-sm",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Thứ tự xuất hiện: "]}),e.jsx("input",{...$("thutu",{required:!0}),type:"number",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/2",children:[e.jsx("label",{className:"underline font-semibold text-sm",children:"Trạng thái sử dụng:"}),e.jsx(ie,{name:"status",control:z,render:({field:{value:c,onChange:f}})=>e.jsx(re,{checked:c,onChange:f})})]})]}),e.jsx("div",{className:"md:space-x-2 space-y-2 md:space-y-0 md:block flex flex-col items-center",children:e.jsxs(T,{type:"submit",sx:{width:"220px"},color:"primary",variant:"contained",children:[e.jsx(le,{})," Thêm mới"]})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(as,{list:i,onClickOpenDialogDelete:p,onClickOpenDialogEdit:b})}),e.jsx(es,{open:u.status,item:u.item,onCloseDialogEdit:d,onSubmit:B}),e.jsx(Ee,{open:l.status,onCloseDialogDelete:E,onConfirmDelete:F,onCancelDelete:x})]})};export{os as default};
