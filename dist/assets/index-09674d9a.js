import{g as Y,a as Z,s as $,B as pe,_ as C,r as m,b as ee,u as ge,c as fe,j as e,d as se,e as S,f as te,h as U,l as xe,i as me,k as be,S as ke,I as R,m as ae,D as je,n as Ce,o as ve,p as ye,q as we,t as oe,C as le,v as Se,w as P,x as ie,y as K,T as H,z as j,A as $e,E as Be,P as F,F as Ne,G as Pe,H as Te,J as Re,K as De,L as Oe,M as _e,N as Q,O as X,Q as G,R as J,U as ze,V as w,W as Fe,X as Ee,Y as Ie,Z as E}from"./index-b364feae.js";function Me(s){return Y("PrivateSwitchBase",s)}Z("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const qe=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Ke=s=>{const{classes:t,checked:o,disabled:l,edge:n}=s,a={root:["root",o&&"checked",l&&"disabled",n&&`edge${S(n)}`],input:["input"]};return te(a,Me,t)},He=$(pe)(({ownerState:s})=>C({padding:9,borderRadius:"50%"},s.edge==="start"&&{marginLeft:s.size==="small"?-3:-12},s.edge==="end"&&{marginRight:s.size==="small"?-3:-12})),Le=$("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Ve=m.forwardRef(function(t,o){const{autoFocus:l,checked:n,checkedIcon:a,className:d,defaultChecked:u,disabled:h,disableFocusRipple:b=!1,edge:i=!1,icon:r,id:p,inputProps:f,inputRef:I,name:D,onBlur:O,onChange:_,onFocus:B,readOnly:L,required:V=!1,tabIndex:M,type:N,value:z}=t,c=ee(t,qe),[x,k]=ge({controlled:n,default:!!u,name:"SwitchBase",state:"checked"}),y=fe(),ce=v=>{B&&B(v),y&&y.onFocus&&y.onFocus(v)},de=v=>{O&&O(v),y&&y.onBlur&&y.onBlur(v)},ue=v=>{if(v.nativeEvent.defaultPrevented)return;const A=v.target.checked;k(A),_&&_(v,A)};let T=h;y&&typeof T>"u"&&(T=y.disabled);const he=N==="checkbox"||N==="radio",q=C({},t,{checked:x,disabled:T,disableFocusRipple:b,edge:i}),W=Ke(q);return e.jsxs(He,C({component:"span",className:se(W.root,d),centerRipple:!0,focusRipple:!b,disabled:T,tabIndex:null,role:void 0,onFocus:ce,onBlur:de,ownerState:q,ref:o},c,{children:[e.jsx(Le,C({autoFocus:l,checked:n,defaultChecked:u,className:W.input,disabled:T,id:he?p:void 0,name:D,onChange:ue,readOnly:L,ref:I,required:V,ownerState:q,tabIndex:M,type:N},N==="checkbox"&&z===void 0?{}:{value:z},f)),x?a:r]}))}),We=Ve;function Ae(s){return Y("MuiSwitch",s)}const Ue=Z("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),g=Ue,Qe=["className","color","edge","size","sx"],Xe=s=>{const{classes:t,edge:o,size:l,color:n,checked:a,disabled:d}=s,u={root:["root",o&&`edge${S(o)}`,`size${S(l)}`],switchBase:["switchBase",`color${S(n)}`,a&&"checked",d&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},h=te(u,Ae,t);return C({},t,h)},Ge=$("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:o}=s;return[t.root,o.edge&&t[`edge${S(o.edge)}`],t[`size${S(o.size)}`]]}})(({ownerState:s})=>C({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},s.edge==="start"&&{marginLeft:-8},s.edge==="end"&&{marginRight:-8},s.size==="small"&&{width:40,height:24,padding:7,[`& .${g.thumb}`]:{width:16,height:16},[`& .${g.switchBase}`]:{padding:4,[`&.${g.checked}`]:{transform:"translateX(16px)"}}})),Je=$(We,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(s,t)=>{const{ownerState:o}=s;return[t.switchBase,{[`& .${g.input}`]:t.input},o.color!=="default"&&t[`color${S(o.color)}`]]}})(({theme:s})=>({position:"absolute",top:0,left:0,zIndex:1,color:s.vars?s.vars.palette.Switch.defaultColor:`${s.palette.mode==="light"?s.palette.common.white:s.palette.grey[300]}`,transition:s.transitions.create(["left","transform"],{duration:s.transitions.duration.shortest}),[`&.${g.checked}`]:{transform:"translateX(20px)"},[`&.${g.disabled}`]:{color:s.vars?s.vars.palette.Switch.defaultDisabledColor:`${s.palette.mode==="light"?s.palette.grey[100]:s.palette.grey[600]}`},[`&.${g.checked} + .${g.track}`]:{opacity:.5},[`&.${g.disabled} + .${g.track}`]:{opacity:s.vars?s.vars.opacity.switchTrackDisabled:`${s.palette.mode==="light"?.12:.2}`},[`& .${g.input}`]:{left:"-100%",width:"300%"}}),({theme:s,ownerState:t})=>C({"&:hover":{backgroundColor:s.vars?`rgba(${s.vars.palette.action.activeChannel} / ${s.vars.palette.action.hoverOpacity})`:U(s.palette.action.active,s.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${g.checked}`]:{color:(s.vars||s).palette[t.color].main,"&:hover":{backgroundColor:s.vars?`rgba(${s.vars.palette[t.color].mainChannel} / ${s.vars.palette.action.hoverOpacity})`:U(s.palette[t.color].main,s.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${g.disabled}`]:{color:s.vars?s.vars.palette.Switch[`${t.color}DisabledColor`]:`${s.palette.mode==="light"?xe(s.palette[t.color].main,.62):me(s.palette[t.color].main,.55)}`}},[`&.${g.checked} + .${g.track}`]:{backgroundColor:(s.vars||s).palette[t.color].main}})),Ye=$("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(s,t)=>t.track})(({theme:s})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:s.transitions.create(["opacity","background-color"],{duration:s.transitions.duration.shortest}),backgroundColor:s.vars?s.vars.palette.common.onBackground:`${s.palette.mode==="light"?s.palette.common.black:s.palette.common.white}`,opacity:s.vars?s.vars.opacity.switchTrack:`${s.palette.mode==="light"?.38:.3}`})),Ze=$("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(s,t)=>t.thumb})(({theme:s})=>({boxShadow:(s.vars||s).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),es=m.forwardRef(function(t,o){const l=be({props:t,name:"MuiSwitch"}),{className:n,color:a="primary",edge:d=!1,size:u="medium",sx:h}=l,b=ee(l,Qe),i=C({},l,{color:a,edge:d,size:u}),r=Xe(i),p=e.jsx(Ze,{className:r.thumb,ownerState:i});return e.jsxs(Ge,{className:se(r.root,n),sx:h,ownerState:i,children:[e.jsx(Je,C({type:"checkbox",icon:p,checkedIcon:p,ref:o,ownerState:i},b,{classes:C({},r,{root:r.switchBase})})),e.jsx(Ye,{className:r.track,ownerState:i})]})}),ne=es,ss=m.forwardRef(function(t,o){return e.jsx(ke,{direction:"up",ref:o,...t})}),ts=$(R)({position:"absolute",right:"16px",top:"4px"});function as({open:s,item:t,onCloseDialogEdit:o,onSubmit:l}){const{register:n,handleSubmit:a,control:d,resetField:u,setValue:h,watch:b,formState:{errors:i}}=ae({defaultValues:{tenkhoi:"",thutu:1,status:!0}});m.useEffect(()=>{t&&(h("tenkhoi",t.tenkhoi,{shouldValidate:!0}),h("thutu",t.thutu,{shouldValidate:!0}),h("status",t.status,{shouldValidate:!0}))},[t]);const r=async p=>{if(l){const f={...p,id_edit:t._id};await l(f),o()}};return e.jsx(e.Fragment,{children:e.jsxs(je,{maxWidth:"lg",fullWidth:!0,disableEscapeKeyDown:!0,onClose:(p,f)=>{f!=="backdropClick"&&o(p,f)},open:s,TransitionComponent:ss,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[e.jsxs(Ce,{style:{display:"flex",borderBottom:"1px solid #ccc",backgroundColor:"#03528f",margin:"0px"},children:[e.jsx(ve,{style:{color:"white",fontSize:"24px",marginRight:"8px"}}),e.jsx("span",{className:"text-white text-[16px]",children:"Chỉnh sửa khối"}),e.jsx(ts,{onClick:()=>o(),children:e.jsx(ye,{style:{color:"white"}})})]}),e.jsx(we,{children:e.jsx(oe,{children:e.jsxs("form",{className:"mt-2 mx-2",onSubmit:a(r),children:[e.jsxs("div",{className:"flex-col flex",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Tên khối: "]}),e.jsx("input",{...n("tenkhoi",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-col flex md:basis-1/2",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Thứ tự xuất hiện: "]}),e.jsx("input",{...n("thutu",{required:!0}),type:"number",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/2",children:[e.jsx("label",{className:"underline font-semibold",children:"Trạng thái hiển thị:"}),e.jsx(le,{name:"status",control:d,render:({field:{value:p,onChange:f}})=>e.jsx(ne,{checked:p,onChange:f})})]})]}),e.jsx(Se,{children:e.jsxs(P,{color:"primary",variant:"contained",type:"submit",style:{margin:"4px auto"},children:[e.jsx(ie,{}),e.jsx("span",{children:"Cập nhật"})]})})]})})})]})})}const os=({row:s,page:t,rowsPerPage:o,index:l,onClickOpenDialogEdit:n,onClickOpenDialogDelete:a})=>(m.useState(null),K(d=>d.authReducer.roles_vanban2025),e.jsxs(H,{className:"hover:bg-slate-200 transition duration-300",children:[e.jsx(j,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:t*o+l}),e.jsx(j,{className:"border-r border-slate-300",align:"left",children:s.tenkhoi}),e.jsx(j,{className:"border-r border-slate-300",align:"left",children:s.thutu}),e.jsx(j,{className:"border-r border-slate-300",align:"left",children:s.status===!0?e.jsx(P,{color:"success",children:"Đang hiển thị"}):e.jsx(P,{color:"warning",children:"Không hiển thị"})}),e.jsxs(j,{align:"right",className:"bg-gray-300 flex justify-center items-center space-x-1 hover:bg-slate-500 transition duration-300",style:{width:"180px"},children:[e.jsx(P,{variant:"contained",color:"info",size:"small",onClick:()=>n(s),children:e.jsx($e,{style:{fontSize:"20px"}})}),e.jsx(P,{variant:"contained",color:"error",size:"small",style:{marginLeft:"4px"},onClick:()=>a(s._id),children:e.jsx(Be,{style:{fontSize:"20px"}})})]})]},s._id));function re(s){const t=_e(),{count:o,page:l,rowsPerPage:n,onPageChange:a}=s,d=i=>{a(i,0)},u=i=>{a(i,l-1)},h=i=>{a(i,l+1)},b=i=>{a(i,Math.max(0,Math.ceil(o/n)-1))};return e.jsxs(oe,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(R,{onClick:d,disabled:l===0,"aria-label":"first page",children:t.direction==="rtl"?e.jsx(Q,{}):e.jsx(X,{})}),e.jsx(R,{onClick:u,disabled:l===0,"aria-label":"previous page",children:t.direction==="rtl"?e.jsx(G,{}):e.jsx(J,{})}),e.jsx(R,{onClick:h,disabled:l>=Math.ceil(o/n)-1,"aria-label":"next page",children:t.direction==="rtl"?e.jsx(J,{}):e.jsx(G,{})}),e.jsx(R,{onClick:b,disabled:l>=Math.ceil(o/n)-1,"aria-label":"last page",children:t.direction==="rtl"?e.jsx(X,{}):e.jsx(Q,{})})]})}re.propTypes={count:F.number.isRequired,onPageChange:F.func.isRequired,page:F.number.isRequired,rowsPerPage:F.number.isRequired};function ls({list:s,onClickOpenDialogEdit:t,onClickOpenDialogDelete:o}){const[l,n]=m.useState(0),[a,d]=m.useState(10);m.useEffect(()=>{n(0)},[s]);const u=l>0?Math.max(0,(1+l)*a-s.length):0,h=(i,r)=>{n(r)},b=i=>{d(parseInt(i.target.value,10)),n(0)};return e.jsxs(e.Fragment,{children:[e.jsx(Ne,{component:Pe,children:e.jsxs(Te,{"aria-label":"custom pagination table",children:[e.jsx(Re,{children:e.jsxs(H,{children:[e.jsx(j,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#03528f"},children:"#"}),e.jsx(j,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#03528f"},children:"Khối, hệ, lực lượng"}),e.jsx(j,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"#03528f"},children:"Thứ tự"}),e.jsx(j,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"200px",backgroundColor:"#03528f"},children:"Trạng thái hiển thị"}),e.jsx(j,{align:"center",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"#03528f",maxWidth:"150px"},children:"Thao tác"})]})}),e.jsxs(De,{children:[(a>0?s.slice(l*a,l*a+a):s).map((i,r)=>e.jsx(os,{row:i,page:l,rowsPerPage:a,index:r+1,onClickOpenDialogEdit:t,onClickOpenDialogDelete:o},i._id)),u>0&&e.jsx(H,{style:{height:53*u},children:e.jsx(j,{colSpan:6})})]})]})}),e.jsx("div",{children:e.jsx(Oe,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:s.length,rowsPerPage:a,page:l,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:h,onRowsPerPageChange:b,ActionsComponent:re,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:r,to:p,count:f}){return`hiển thị ${r} đến ${p} bản ghi trong tổng số ${f!==-1?f:`more than ${p}`} bản ghi`}})})]})}const ns=()=>{let s=K(c=>c.authReducer.id_user);const t=ze();let o=K(c=>c.authReducer.captaikhoan_phieulayykien);if(o!=="Quản trị V03"&&o!=="Quản trị Công an tỉnh, Cục nghiệp vụ")return w.error("Tài khoản không có truy cập trang này",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"}),e.jsx(Fe,{to:"/login",replace:!0});const[l,n]=m.useState([]),[a]=Ee(),[d,u]=m.useState({status:!1,item:null}),h=()=>{u({...d,status:!1})},b=c=>{u({item:c,status:!0})},[i,r]=m.useState({status:!1,id_Delete:null}),p=c=>{r({status:!0,id_Delete:c})},f=()=>{r({...i,status:!1})},I=()=>{r({...i,status:!1})},{register:D,handleSubmit:O,control:_,resetField:B,watch:L,formState:{errors:V}}=ae({defaultValues:{tenkhoi:"",thutu:1,status:!0}});m.useEffect(()=>{(async()=>{try{let x=await E.getKhois({user_created:s});n(x.data)}catch(x){x.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(t("/login"),w.error(x.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"}))}})()},[]);const M=async c=>{let x={...c,user_created:s};a(!0);try{let k=await E.addKhoi(x);n(k.data.khois),setTimeout(()=>{a(!1)},400),B("tenkhoi"),B("thutu"),B("status"),w.success(k.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"})}catch(k){w.error(k.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"}),a(!1)}},N=async c=>{let x={...c,user_created:s};a(!0);try{let k=await E.editKhoi(x);n(k.data.khois),setTimeout(()=>{a(!1)},400),w.success(k.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"})}catch(k){w.error(k.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"}),a(!1)}},z=async()=>{a(!0);try{let c=await E.deleteKhoi(i.id_Delete,{user_created:s});n(c.data.khois),setTimeout(()=>{a(!1)},400),r({...i,status:!1}),w.success(c.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"})}catch(c){r({...i,status:!1}),w.error(c.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"}),a(!1)}};return e.jsxs("div",{"data-aos":"fade-left","data-aos-once":"true",children:[e.jsx("div",{className:"my-2",children:e.jsx("h4",{className:"uppercase font-semibold text-sm md:text-[16px]",children:"Quản trị khối hệ thống"})}),e.jsxs("form",{className:"px-4 py-4 border mt-3 pb-8 rounded-md shadow-md",onSubmit:O(M),children:[e.jsxs("div",{className:"flex-col flex",children:[e.jsxs("label",{className:"underline font-semibold text-sm",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Tên khối: "]}),e.jsx("input",{...D("tenkhoi",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-col flex md:basis-1/2",children:[e.jsxs("label",{className:"underline font-semibold text-sm",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Thứ tự xuất hiện: "]}),e.jsx("input",{...D("thutu",{required:!0}),type:"number",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/2",children:[e.jsx("label",{className:"underline font-semibold text-sm",children:"Trạng thái sử dụng:"}),e.jsx(le,{name:"status",control:_,render:({field:{value:c,onChange:x}})=>e.jsx(ne,{checked:c,onChange:x})})]})]}),e.jsx("div",{className:"md:space-x-2 space-y-2 md:space-y-0 md:block flex flex-col items-center",children:e.jsxs(P,{type:"submit",sx:{width:"220px"},color:"primary",variant:"contained",children:[e.jsx(ie,{})," Thêm mới"]})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(ls,{list:l,onClickOpenDialogDelete:p,onClickOpenDialogEdit:b})}),e.jsx(as,{open:d.status,item:d.item,onCloseDialogEdit:h,onSubmit:N}),e.jsx(Ie,{open:i.status,onCloseDialogDelete:I,onConfirmDelete:z,onCancelDelete:f})]})};export{ns as default};
